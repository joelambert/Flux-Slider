/*
 Flux Slider v1.3.1
 http://www.joelambert.co.uk/flux

 Copyright 2011, Joe Lambert.
 Free to use under the MIT license.
 http://www.opensource.org/licenses/mit-license.php
*/
var flux={version:"1.3.1"};
flux.slider=function(b,d){flux.browser.init();if(!flux.browser.supportsTransitions){window.console&&window.console.error&&console.error("Flux Slider requires a browser that supports CSS3 transitions");return false}var a=this;this.element=$(b);this.transitions=[];for(var c in flux.transitions)this.transitions.push(c);this.options=$.extend({autoplay:true,transitions:this.transitions,delay:4E3,pagination:true,controls:true},d);if(!flux.browser.supports3d){var e=[];$(this.options.transitions).each(function(f,g){(new flux.transitions[g](this)).options.requires3d||
e.push(g)});this.options.transitions=e}this.images=[];this.currentImageIndex=this.imageLoadedCount=0;this.nextImageIndex=1;this.playing=false;this.element.find("img").each(function(f,g){a.images.push(g.cloneNode(false));var h=new Image;h.onload=function(){a.imageLoadedCount++;a.width=this.width;a.height=this.height;if(a.imageLoadedCount>=a.images.length){a.finishedLoading();a.setupImages()}};h.src=g.src;$(g).remove()});this.container=$('<div class="fluxslider"></div>');this.element.append(this.container);
this.imageContainer=$('<div class="images loading"></div>').css({position:"relative",overflow:"hidden","min-height":"100px"});this.container.append(this.imageContainer);this.image1=$('<div class="image1" style="height: 100%; width: 100%"></div>');this.imageContainer.append(this.image1);this.image2=$('<div class="image2" style="height: 100%; width: 100%"></div>');this.imageContainer.append(this.image2);$(this.image1).css({position:"absolute",top:"0px",left:"0px"});$(this.image2).css({position:"absolute",
top:"0px",left:"0px"});this.options.autoplay&&this.start()};
flux.slider.prototype={constructor:flux.slider,start:function(){var b=this;this.interval=setInterval(function(){b.transition()},this.options.delay)},stop:function(){clearInterval(this.interval);this.interval=null},isPlaying:function(){return this.interval!=null},next:function(b,d){this.showImage(this.currentImageIndex+1,b,d)},prev:function(b,d){this.showImage(this.currentImageIndex-1,b,d)},showImage:function(b,d,a){this.setNextIndex(b);this.stop();this.setupImages();this.transition(d,a);this.options.autoplay&&
this.start()},finishedLoading:function(){var b=this;this.container.css({width:this.width+"px",height:this.height+"px"});this.imageContainer.removeClass("loading");if(this.options.pagination){this.pagination=$('<ul class="pagination"></ul>').css({margin:"0px",padding:"0px","text-align":"center"});this.pagination.bind("click",function(d){d.preventDefault();b.showImage($(d.target).data("index"))});$(this.images).each(function(d){var a=$('<li data-index="'+d+'">'+(d+1)+"</li>").css({display:"inline-block",
"margin-left":"0.5em",cursor:"pointer"});b.pagination.append(a);d==0&&a.css("margin-left",0).addClass("current")});this.container.append(this.pagination)}$(this.imageContainer).css({width:this.width+"px",height:this.height+"px"});$(this.image1).css({width:this.width+"px",height:this.height+"px"});$(this.image2).css({width:this.width+"px",height:this.height+"px"});this.container.css({width:this.width+"px",height:this.height+(this.options.pagination?this.pagination.height():0)+"px"})},setupImages:function(){this.image1.css({"background-image":'url("'+
this.getImage(this.currentImageIndex).src+'")',"z-index":101}).children().remove();this.image2.css({"background-image":'url("'+this.getImage(this.nextImageIndex).src+'")',"z-index":100}).show();if(this.options.pagination){this.pagination.find("li.current").removeClass("current");$(this.pagination.find("li")[this.currentImageIndex]).addClass("current")}},transition:function(b,d){if(b==undefined||!flux.transitions[b])b=this.options.transitions[Math.floor(Math.random()*this.options.transitions.length)];
(new flux.transitions[b](this,$.extend(this.options[b]?this.options[b]:{},d))).run();this.currentImageIndex=this.nextImageIndex;this.setNextIndex(this.currentImageIndex+1)},getImage:function(b){b%=this.images.length;return this.images[b]},setNextIndex:function(b){if(b==undefined)b=this.currentImageIndex+1;this.nextImageIndex=b;if(this.nextImageIndex>this.images.length-1)this.nextImageIndex=0;if(this.nextImageIndex<0)this.nextImageIndex=this.images.length-1},increment:function(){this.currentImageIndex++;
if(this.currentImageIndex>this.images.length-1)this.currentImageIndex=0}};
flux.browser={init:function(){if(flux.browser.supportsTransitions===undefined){var b=document.createElement("div"),d=["-webkit","-moz","-o","-ms"],a=["Webkit","Moz","O","Ms"];if(window.Modernizr&&Modernizr.csstransitions!==undefined)flux.browser.supportsTransitions=Modernizr.csstransitions;else{flux.browser.supportsTransitions=false;for(var c=0;c<a.length;c++)if(a[c]+"Transition"in b.style)flux.browser.supportsTransitions=flux.browser.supportsTransitions||true}if(window.Modernizr&&Modernizr.csstransforms3d!==
undefined)flux.browser.supports3d=Modernizr.csstransforms3d;else{b=$('<div id="csstransform3d"></div>');d=$('<style media="(transform-3d), ('+d.join("-transform-3d),(")+'-transform-3d)">div#csstransform3d { position: absolute; left: 9px }</style>');$("body").append(b);$("head").append(d);flux.browser.supports3d=b.get(0).offsetLeft==9;b.remove();d.remove()}}},translate:function(b,d,a){b=b!=undefined?b:0;d=d!=undefined?d:0;a=a!=undefined?a:0;return"translate"+(flux.browser.supports3d?"3d(":"(")+b+"px,"+
d+(flux.browser.supports3d?"px,"+a+"px)":"px)")},rotateX:function(b){return flux.browser.rotate("x",b)},rotateY:function(b){return flux.browser.rotate("y",b)},rotateZ:function(b){return flux.browser.rotate("z",b)},rotate:function(b,d){if(!b in{x:"",y:"",z:""})b="z";d=d!=undefined?d:0;return flux.browser.supports3d?"rotate3d("+(b=="x"?"1":"0")+", "+(b=="y"?"1":"0")+", "+(b=="z"?"1":"0")+", "+d+"deg)":b=="z"?"rotate("+d+"deg)":""}};$(function(){flux.browser.init()});
(function(){$.fn.css3=function(b){var d={},a=["webkit","moz","ms","o"],c;for(c in b){for(var e=0;e<a.length;e++)d["-"+a[e]+"-"+c]=b[c];d[c]=b[c]}this.css(d);return this};$.fn.transitionEnd=function(b){for(var d=["webkitTransitionEnd","transitionend","oTransitionEnd"],a=0;a<d.length;a++)this.bind(d[a],function(c){for(var e=0;e<d.length;e++)$(this).unbind(d[e]);b&&b.call(this,c)});return this}})();
flux.transition=function(b,d){this.options=$.extend({requires3d:false,after:function(){}},d);this.slider=b;if(this.options.requires3d&&!flux.browser.supports3d){var a=this;this.options.setup=undefined;this.options.after=undefined;this.options.execute=function(){a.finished()}}};
flux.transition.prototype={constructor:flux.transition,run:function(){var b=this;this.options.setup&&this.options.setup.call(this);this.slider.image1.css({"background-image":"none"});this.slider.imageContainer.css("overflow",this.options.requires3d?"visible":"hidden");setTimeout(function(){b.options.execute&&b.options.execute.call(b)},5)},finished:function(){this.options.after&&this.options.after.call(this);this.slider.imageContainer.css("overflow","hidden");this.slider.setupImages();this.slider.element.trigger("fluxTransitionEnd")}};
flux.transitions={};
flux.transitions.bars=function(b,d){return new flux.transition(b,$.extend({barWidth:60,setup:function(){for(var a=Math.floor(this.slider.image1.width()/this.options.barWidth)+1,c=document.createDocumentFragment(),e=0;e<a;e++){var f=$("<div></div>").attr("class","bar bar-"+e).css({width:this.options.barWidth+"px",height:"100%",position:"absolute",top:"0",left:e*this.options.barWidth+"px","background-image":this.slider.image1.css("background-image"),"background-position":"-"+e*this.options.barWidth+"px 0px"}).css3({"transition-duration":"400ms",
"transition-timing-function":"ease-in","transition-property":"all","transition-delay":e*40+"ms"});c.appendChild(f.get(0))}this.slider.image1.get(0).appendChild(c)},execute:function(){var a=this,c=this.slider.image1.height(),e=this.slider.image1.find("div.bar");$(e[e.length-1]).transitionEnd(function(){a.finished()});e.css({opacity:"0.5"}).css3({transform:flux.browser.translate(0,c)})}},d))};
flux.transitions.bars3d=function(b,d){return new flux.transition(b,$.extend({requires3d:true,barWidth:100,perspective:600,setup:function(){var a=Math.floor(this.slider.image1.width()/this.options.barWidth)+1;this.options.barWidth=Math.floor(this.slider.image1.width()/a);for(var c=this.slider.image1.width()-a*this.options.barWidth,e=Math.ceil(c/a),f=this.slider.image1.height(),g=0,h=document.createDocumentFragment(),i=0;i<a;i++){var k=this.options.barWidth;if(c>0){var j=c>=e?e:c;k+=j;c-=j}j=$('<div class="bar bar-'+
i+'"></div>').css({width:k+"px",height:"100%",position:"absolute",top:"0px",left:"0px","z-index":200,"background-image":this.slider.image1.css("background-image"),"background-position":"-"+g+"px 0px","background-repeat":"no-repeat"}).css3({"backface-visibility":"hidden"});var m=$(j.get(0).cloneNode(false)).css({"background-image":this.slider.image2.css("background-image")}).css3({transform:flux.browser.rotateX(90)+" "+flux.browser.translate(0,-f/2,f/2)}),o=$('<div class="side bar bar-'+i+'"></div>').css({width:f+
"px",height:f+"px",position:"absolute",top:"0px",left:"0px",background:"#222","z-index":190}).css3({transform:flux.browser.rotateY(90)+" "+flux.browser.translate(f/2,0,-f/2)+" "+flux.browser.rotateY(180),"backface-visibility":"hidden"}),l=$(o.get(0).cloneNode(false)).css3({transform:flux.browser.rotateY(90)+" "+flux.browser.translate(f/2,0,k-f/2)});j=$('<div class="barcontainer"></div>').css({width:k+"px",height:"100%",position:"absolute",top:"0px",left:g+"px","z-index":i>a/2?1E3-i:1E3}).css3({"transition-duration":"800ms",
"transition-timing-function":"linear","transition-property":"all","transition-delay":i*150+"ms","transform-style":"preserve-3d"}).append(j).append(m).append(o).append(l);h.appendChild(j.get(0));g+=k}this.slider.image1.get(0).appendChild(h);this.slider.imageContainer.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"})},execute:function(){var a=this,c=this.slider.image1.height(),e=this.slider.image1.find("div.barcontainer");this.slider.image2.hide();e.last().transitionEnd(function(){a.slider.image2.show();
a.finished()});e.css3({transform:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,c/2,c/2)})}},d))};flux.transitions.blinds=function(b,d){return new flux.transitions.bars(b,$.extend({barWidth:70,execute:function(){var a=this;this.slider.image1.height();var c=this.slider.image1.find("div.bar");$(c[c.length-1]).transitionEnd(function(){a.finished()});c.css({opacity:"0.5"}).css3({transform:"scalex(0.0001)"})}},d))};
flux.transitions.blinds3d=function(b,d){return new flux.transition(b,$.extend({requires3d:true,barWidth:150,perspective:600,setup:function(){var a=Math.floor(this.slider.image1.width()/this.options.barWidth)+1;this.slider.image1.height();this.options.barWidth=Math.floor(this.slider.image1.width()/a);for(var c=this.slider.image1.width()-a*this.options.barWidth,e=Math.ceil(c/a),f=this.slider.image1.height(),g=0,h=document.createDocumentFragment(),i=0;i<a;i++){var k,j,m;if(c>0){k=c>=e?e:remainderY;c-=
k}k=this.options.barWidth;j=$('<div class="bar bar-'+i+'"></div>').css({width:k+"px",height:"100%",position:"absolute",top:"0px",left:"0px","z-index":200,"background-image":this.slider.image1.css("background-image"),"background-position":"-"+g+"px 0px","background-repeat":"no-repeat"}).css3({"backface-visibility":"hidden"});m=$(j.get(0).cloneNode(false)).css({"background-image":this.slider.image2.css("background-image"),"z-index":190}).css3({transform:flux.browser.rotateY(180)});j=$('<div class="barcontainer"></div>').css({width:k+
"px",height:f+"px",position:"absolute",top:"0px",left:g+"px","z-index":i>a/2?1E3-i:1E3}).css3({"transition-duration":"800ms","transition-timing-function":"ease-out","transition-property":"all","transition-delay":i*150+"ms","transform-style":"preserve-3d"}).append(j).append(m);h.appendChild(j.get(0));g+=k}this.slider.image1.get(0).appendChild(h);this.slider.imageContainer.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"})},execute:function(){var a=this,c=this.slider.image1.find("div.barcontainer");
this.slider.image2.hide();c.last().transitionEnd(function(){a.slider.image2.show();a.finished()});c.css3({transform:flux.browser.rotateY(180)})}},d))};
flux.transitions.zip=function(b,d){return new flux.transitions.bars(b,$.extend({execute:function(){var a=this,c=this.slider.image1.height(),e=this.slider.image1.find("div.bar");$(e[e.length-1]).transitionEnd(function(){a.finished()});e.each(function(f,g){setTimeout(function(){$(g).css({opacity:"0.3"}).css3({transform:flux.browser.translate(0,f%2?"-"+2*c:c)})},5)})}},d))};
flux.transitions.blocks=function(b,d){return new flux.transition(b,$.extend({blockSize:80,blockDelays:{},maxDelay:0,setup:function(){for(var a=Math.floor(this.slider.image1.width()/this.options.blockSize)+1,c=Math.floor(this.slider.image1.height()/this.options.blockSize)+1,e=document.createDocumentFragment(),f=0;f<a;f++)for(var g=0;g<c;g++){var h=Math.floor(Math.random()*10*100),i=$("<div></div>").attr("class","block block-"+f+"-"+g).data("id",f+":"+g).css({width:this.options.blockSize+"px",height:this.options.blockSize+
"px",position:"absolute",top:g*this.options.blockSize+"px",left:f*this.options.blockSize+"px","background-image":this.slider.image1.css("background-image"),"background-position":"-"+f*this.options.blockSize+"px -"+g*this.options.blockSize+"px"}).css3({"transition-duration":"350ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":h+"ms"});e.appendChild(i.get(0));if(h>this.options.maxDelay){this.options.maxDelayBlock=i;this.options.maxDelay=h}}this.slider.image1.get(0).appendChild(e)},
execute:function(){var a=this,c=this.slider.image1.find("div.block");this.options.maxDelayBlock.transitionEnd(function(){a.finished()});c.each(function(e,f){setTimeout(function(){$(f).css({opacity:"0"}).css3({transform:"scale(0.8)"})},5)})}},d))};
flux.transitions.concentric=function(b,d){return new flux.transition(b,$.extend({blockSize:60,delay:150,alternate:false,setup:function(){for(var a=this.slider.image1.width(),c=this.slider.image1.height(),e=Math.ceil((Math.sqrt(a*a+c*c)-this.options.blockSize)/2/this.options.blockSize)+1,f=document.createDocumentFragment(),g=0;g<e;g++){var h=2*g*this.options.blockSize+this.options.blockSize;h=$("<div></div>").attr("class","block block-"+g).css({width:h+"px",height:h+"px",position:"absolute",top:(c-
h)/2+"px",left:(a-h)/2+"px","z-index":100+(e-g),"background-image":this.slider.image1.css("background-image"),"background-position":"center center"}).css3({"border-radius":h+"px","transition-duration":"800ms","transition-timing-function":"linear","transition-property":"all","transition-delay":(e-g)*this.options.delay+"ms"});f.appendChild(h.get(0))}this.slider.image1.get(0).appendChild(f)},execute:function(){var a=this,c=this.slider.image1.find("div.block");$(c[0]).transitionEnd(function(){a.finished()});
c.each(function(e,f){setTimeout(function(){$(f).css({opacity:"0"}).css3({transform:flux.browser.rotateZ((!a.options.alternate||e%2?"":"-")+"90")})},5)})}},d))};flux.transitions.warp=function(b,d){return new flux.transitions.concentric(b,$.extend({delay:30,alternate:true},d))};
flux.transitions.cube=function(b,d){return new flux.transition(b,$.extend({requires3d:true,barWidth:100,direction:"left",perspective:1E3,setup:function(){var a=this.slider.image1.width(),c=this.slider.image1.height();this.slider.imageContainer.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"});this.cubeContainer=$('<div class="cube"></div>').css({width:a+"px",height:c+"px",position:"relative"}).css3({"transition-duration":"800ms","transition-timing-function":"linear","transition-property":"all",
"transform-style":"preserve-3d"});a={height:"100%",width:"100%",position:"absolute",top:"0px",left:"0px"};this.cubeContainer.append($('<div class="face current"></div>').css($.extend(a,{background:this.slider.image1.css("background-image")})));this.cubeContainer.append($('<div class="face next"></div>').css($.extend(a,{background:this.slider.image2.css("background-image")})).css3({transform:this.options.transitionStrings.call(this,this.options.direction,"nextFace")}));this.slider.image1.append(this.cubeContainer)},
execute:function(){var a=this;this.slider.image1.width();this.slider.image1.height();this.slider.image2.hide();this.cubeContainer.css3({transform:this.options.transitionStrings.call(this,this.options.direction,"container")}).transitionEnd(function(){a.slider.image2.show();a.finished()})},transitionStrings:function(a,c){var e=this.slider.image1.width(),f=this.slider.image1.height();e={up:{nextFace:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,f/2,f/2),container:flux.browser.rotateX(90)+" "+
flux.browser.translate(0,-f/2,f/2)},down:{nextFace:flux.browser.rotateX(90)+" "+flux.browser.translate(0,-f/2,f/2),container:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,f/2,f/2)},left:{nextFace:flux.browser.rotateY(90)+" "+flux.browser.translate(e/2,0,e/2),container:flux.browser.rotateY(-90)+" "+flux.browser.translate(-e/2,0,e/2)},right:{nextFace:flux.browser.rotateY(-90)+" "+flux.browser.translate(-e/2,0,e/2),container:flux.browser.rotateY(90)+" "+flux.browser.translate(e/2,0,e/2)}};return e[a]&&
e[a][c]?e[a][c]:false}},d))};
flux.transitions.tiles3d=function(b,d){return new flux.transition(b,$.extend({requires3d:true,tileWidth:180,perspective:600,setup:function(){var a=Math.floor(this.slider.image1.width()/this.options.tileWidth)+1,c=Math.floor(this.slider.image1.height()/this.options.tileWidth)+1;this.options.tileWidth=Math.floor(this.slider.image1.width()/a);var e=this.slider.image1.width()-a*this.options.tileWidth,f=Math.ceil(e/a),g=this.slider.image1.height()-c*this.options.tileWidth,h=Math.ceil(g/c);this.slider.image1.height();
for(var i=0,k=document.createDocumentFragment(),j=0;j<a;j++){var m=0,o=this.options.tileWidth;if(e>0){var l=e>=f?f:e;o+=l;e-=l}for(l=0;l<c;l++){var p=this.options.tileWidth,n=g;if(n>0)p+=n>=h?h:n;n=$('<div class="tile tile-'+j+"-"+l+'"></div>').css({width:o+"px",height:p+"px",position:"absolute",top:"0px",left:"0px","z-index":200,"background-image":this.slider.image1.css("background-image"),"background-position":"-"+i+"px -"+m+"px","background-repeat":"no-repeat"}).css3({"backface-visibility":"hidden"});
var q=$(n.get(0).cloneNode(false)).css({"background-image":this.slider.image2.css("background-image"),"z-index":190}).css3({transform:flux.browser.rotateY(180)});n=$('<div class="tilecontainer"></div>').css({width:o+"px",height:p+"px",position:"absolute",top:m+"px",left:i+"px","z-index":(j>a/2?500-j:500)+(l>c/2?500-l:500)}).css3({"transition-duration":"800ms","transition-timing-function":"ease-out","transition-property":"all","transition-delay":j*200+l*150+"ms","transform-style":"preserve-3d"}).append(n).append(q);
k.appendChild(n.get(0));m+=p}i+=o}this.slider.image1.get(0).appendChild(k);this.slider.imageContainer.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"})},execute:function(){var a=this,c=this.slider.image1.find("div.tilecontainer");this.slider.image2.hide();c.last().transitionEnd(function(){a.slider.image2.show();a.finished()});c.css3({transform:flux.browser.rotateY(180)})}},d))};
